{% load relaton %}
{% with val.surname.content as surname and val.completename.content as fullname and val.forename as given_names and val.initial|as_list as initials %}
  {% if fullname %}
    {{ fullname }}
  {% else %}
    {% for name in given_names %}
      {{ name.content }}{% if not forloop.last %}, {% endif %}
    {% endfor %}
    {% for initial in initials %}
      {{ initial.content }}.
    {% endfor %}
    {{ surname }}
  {% endif %}
{% endwith %}
