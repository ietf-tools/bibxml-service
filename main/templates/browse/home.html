{% extends "browse/base.html" %}

{% block title %}{{ block.super }} Citations{% endblock %}

{% block nav %}{% endblock %}

{% block content %}

  {% if doctypes %}
    <h2 class="f5">Find document by ID</h2>
    <form class="black-80" method="GET" action="{% url "browse_citation_by_docid_redirect" %}">
      <select name="doctype" title="Document type" class="w-10 ba b--black-20 input-reset dib pa2 br0">
        {% for type in doctypes %}
          <option value="{{ type.doctype }}">
            {{ type.doctype }}
          </option>
        {% endfor %}
      </select>
      <input
        id="docid"
        name="docid"
        type="text"
        placeholder="Identifier"
        class="w-50 input-reset dib ba b--black-20 pa2"
        aria-describedby="docid-desc" />
      <input
        type="submit"
        class="dim pa2 ph3 dib ba b--dark-blue bg-dark-blue white"
        value="Find" />
      <div id="docid-desc" class="f6 black-60 db mb4 measure lh-copy">
        <p>
          Searches all indexed sources for a document matching given type and ID.
          If one is found, youâ€™ll be redirected to it.
        <p>Document identifier format depends on document type.
        <p>
          DOI example:
          <code class="nowrap pa1 ph2 bg-light-gray black-80">10.1109/IEEESTD.2005.98651</code>
        <p>
          IEEE example:
          <code class="nowrap pa1 ph2 bg-light-gray black-80">IEEE C57-12-20.2011</code>
      </div>
    </form>
  {% endif %}

  <div class="nowrap overflow-x-auto">
    <h2 class="f5 dib mr3 ">Browse indexed or external source</h2>
    {% for ds_id in browsable_datasets %}
      <a class="
            link
            {% if dataset_id == ds_id %}underline{% endif %}
            dim
            {% if ds_id in authoritative_datasets %}black-80 fw5{% else %}gray{% endif %}
            f5 f4-ns dib mr3
          " href="{% url "browse_dataset" ds_id %}">
        {{ ds_id }}
      </a>
    {% endfor %}
  </div>

  <h2 class="f5">Search documents for substring match</h2>
  <form class="black-80" method="GET" action="{% url "search_citations" %}">
    <input
      id="query"
      name="query"
      type="text"
      placeholder="Search by substring match"
      class="w-60 input-reset dib ba b--black-20 pa2"
      aria-describedby="query-desc" />
    <input
      type="submit"
      class="w-15 dim pa2 ph3 dib ba b--dark-blue bg-dark-blue white"
      value="Search" />
    <div id="query-desc" class="f6 black-60 db mb4 measure lh-copy">
      <p>Some operators are supported.
         Example query: <code class="nowrap pa1 ph2 bg-light-gray black-80">+nist "metropolitan area" -"wind damage"</code>.
      <p>Note: currently match is performed against entire JSON representations of citations.
    </div>
  </form>

  <h2 class="f5">See also</h2>
  <ul class="list pl0 mb5">
    <li>
      <a href="{% url "api_index" %}" target="_blank" class="link">
        API reference &rarr;
      </a>
    <li>
      <a href="{% url "openapi_readable_spec" "openapi_spec_legacy" %}" target="_blank" class="link">
        Compatibility API reference &rarr;
      </a>
  </ul>
{% endblock %}
